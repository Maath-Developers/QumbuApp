@model Qumbu_Community_Health_Care_Center.Models.Medical_File
@using Qumbu_Community_Health_Care_Center.Models
@using Microsoft.AspNetCore.Identity
@using Qumbu_Community_Health_Care_Center.Areas.Identity.Data
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager
@{
    ViewData["Title"] = "Create";
    Layout = "~/Views/Shared/_Walk-in-Layout.cshtml";
}

<h3><strong>Medical File</strong></h3>
@if (User.IsInRole("Admin"))
{
    <h4>Fill in the below information to create a patient file.</h4>
}else
{
    <h4>Fill in the below information to create your file.</h4>

}
<hr />
<div class="row">
    
    <form asp-controller="Medical_File" asp-action="Create_File" class="row">
        
        <div class="form-group text-end">
            <a asp-controller="Medical_File" asp-action="My_Medical_File">View Files</a>
        </div>
        <div asp-validation-summary="ModelOnly" class="text-danger"></div>
        <div class="col-6 border mt-4">
            <strong><h4 class="text-center m-1">Personal Information</h4></strong>
            @if (User.IsInRole("Admin"))
            {
                <label asp-for="PatientID" class="control-label">Patient Name</label>
                <select asp-for="PatientID" class="form-control">
                    @foreach (ApplicationUser user in ViewBag.Patient)
                    {
                        <option value="select">Select patient name</option>
                        <option value="@user.Id">@user.FirstName @user.LastName</option>
                    }
                </select>
                <span asp-validation-for="PatientID" class="text-danger mt-2"></span>
            }
            <div class="form-group">
                <label asp-for="IDNumber" class="control-label"></label>
                <input asp-for="IDNumber" class="form-control" />
                <span asp-validation-for="IDNumber" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="DateofBirth" class="control-label"></label>
                <input asp-for="DateofBirth" class="form-control" />
                <span asp-validation-for="DateofBirth" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Gender" class="control-label"></label>
                <select asp-for="Gender" class="form-control">
                    <option value="select">Select Gender</option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                </select>
                <span asp-validation-for="Gender" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Status" class="control-label"></label>
                <select asp-for="Status" class="form-control">
                    <option value="select">Select Status</option>
                    <option value="Single">Single</option>
                    <option value="Married">Married</option>
                    <option value="Divorced">Divorced</option>
                    <option value="Widowed">Widowed</option>
                    <option value="Separated">Separated</option>
                </select>
                <span asp-validation-for="Status" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Address" class="control-label"></label>
                <textarea asp-for="Address" class="form-control"></textarea>
                <span asp-validation-for="Address" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Province" class="control-label">Select Province</label>
                <select asp-for="Province" class="form-control">
                    <option value="select">Select province</option>
                    <option value="Eastern Cape">Eastern Cape</option>
                    <option value="Free State">Free State</option>
                    <option value="Gauteng">Gauteng</option>
                    <option value="KwaZulu-Natal">KwaZulu-Natal</option>
                    <option value="Limpopo">Limpopo</option>
                    <option value="Mpumalanga">Mpumalanga</option>
                    <option value="North West">North West</option>
                    <option value="Northern Cape">Northern Cape</option>
                    <option value="Western Cape">Western Cape</option>
                </select>
                <span asp-validation-for="Province" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="postalCode" class="control-label"></label>
                <input asp-for="postalCode" class="form-control" />
                <span asp-validation-for="postalCode" class="text-danger"></span>
            </div>
        </div>
        <div class="col-6 border mt-4">
            <strong><h4 class="text-center m-1">Next of Kin Information</h4></strong>

            <div class="form-group">
                <label asp-for="NextfoKin" class="control-label"></label>
                <input asp-for="NextfoKin" class="form-control" />
                <span asp-validation-for="NextfoKin" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="kinCell" class="control-label"></label>
                <input asp-for="kinCell" class="form-control" />
                <span asp-validation-for="kinCell" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Relationship" class="control-label"></label>
                <select asp-for="Relationship" class="form-control">
                    <option value="select">Select Relationship</option>
                    <option value="Spouse">Spouse</option>
                    <option value="Parent">Parent</option>
                    <option value="Sibling">Sibling</option>
                    <option value="Child">Child</option>
                    <option value="Other">Other</option>
                </select>
                <span asp-validation-for="Relationship" class="text-danger"></span>
            </div>
            
            <h4 class="text-center m-1 text-danger">Medical Information</h4>
            <div class="form-group">
                <label asp-for="BloodType" class="control-label"></label>
                <select asp-for="BloodType" class="form-control">
                    <option value="select">Select Blood type</option>
                    <option value="A+">A+</option>
                    <option value="A-">A-</option>
                    <option value="B+">B+</option>
                    <option value="B-">B-</option>
                    <option value="AB+">AB+</option>
                    <option value="AB-">AB-</option>
                    <option value="O+">O+</option>
                    <option value="O-">O-</option>
                </select>
                <span asp-validation-for="BloodType" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Allergies" class="control-label"></label>
                <select asp-for="Allergies" class="form-control">
                    <option value="Select">Select Allegies</option>
                    <option value="Pollen">Pollen</option>
                    <option value="Dust Mites">Dust Mites</option>
                    <option value="Peanuts">Peanuts</option>
                    <option value="Milk">Milk</option>
                    <option value="Shellfish">Shellfish</option>
                    <option value="Penicillin">Penicillin</option>
                    <option value="Other">Other</option>
                </select>
                <span asp-validation-for="Allergies" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Surgery" class="control-label"></label>
                <select asp-for="Surgery" class="form-control">
                    <option value="select">Select</option>
                    <option value="Yes">Yes</option>
                    <option value="No">No</option>
                    
                </select>
                <span asp-validation-for="Surgery" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="extraNotes" class="control-label"></label>
                <textarea asp-for="extraNotes" class="form-control"></textarea>
                <span asp-validation-for="extraNotes" class="text-danger"></span>
            </div>
        </div>

        <br />
        <div class="form-group text-end">
            <input type="submit" value="Create" class="btn btn-primary p-2" />
        </div>

    </form>

</div>
@* <h4>List of Files</h4>
<br />
<div class="row">
    <table class="table table-bordered table-striped table-sm" style="width:100%">
        <thead class="table-primary">
            <tr>
                <th>
                    File Number
                </th>
                <th>
                    Patient Full Name
                </th>
                <td>
                    @Html.DisplayNameFor(model => model.DateofBirth)
                </td>
                <td>
                    @Html.DisplayNameFor(model => model.Gender)
                </td>
                <td>
                    @Html.DisplayNameFor(model => model.Address)
                </td>
            </tr>
        </thead>
        <tbody>
            @foreach (Medical_File file in ViewBag.file)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => file.fileId)
                    </td>
                    <td width="15%">
                        @foreach (ApplicationUser user in ViewBag.Patient)
                        {
                            <option value="@user.Id">@user.FirstName @user.LastName</option>
                        }
                    </td>
                    <td width="20%">@file.DateofBirth</td>
                    <td width="15%">@file.Gender</td>
                    <td width="15%">@file.Address</td>
                    <td width="23%">
                        <button class="btn-outline-primary">
                            <a asp-controller="Medical_File" asp-action="MyFile" asp-route-id="@file.fileId">File Report</a>
                        </button>
                        @* <button class="btn-outline-primary">
                            <a asp-controller="" asp-action="Details" asp-route-id="@app.AppointmentID">Delay</a>
                        </button>
                        <button class="btn-outline-primary">
                            <a asp-controller="" asp-action="Delete" asp-route-id="@app.AppointmentID">Delete</a>
                        </button> *@
                    @* </td>

                </tr>
            }
        </tbody>
    </table>
</div> *@
 


@* <div>
    <a asp-action="Index">Back to List</a>
</div> *@

